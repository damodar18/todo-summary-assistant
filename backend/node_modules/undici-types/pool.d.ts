import Client from './client'
import TPoolStats from './pool-stats'
import { URL } from 'url'
import Dispatcher from "./dispatcher";

export default Pool

declare class Pool extends Dispatcher {
  constructor(url: string | URL, options?: Pool.Options)
  
  closed: boolean;
  
  destroyed: boolean;
  
  readonly stats: TPoolStats;
}

declare namespace Pool {
  export type PoolStats = TPoolStats;
  export interface Options extends Client.Options {
    
    factory?(origin: URL, opts: object): Dispatcher;
    
    connections?: number | null;

    interceptors?: { Pool?: readonly Dispatcher.DispatchInterceptor[] } & Client.Options["interceptors"]
  }
}
